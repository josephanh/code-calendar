<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Lịch 12 tháng PDF</title>
    <link rel="shortcut icon" href="./image/logo.png" type="image/x-icon" />
    <link rel="stylesheet" href="./css/font.css" />
    <link rel="stylesheet" href="./css/index.css" />
    <link rel="stylesheet" href="./css/modal.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="./js/lunar.js"></script>
    <script src="./js/const.js"></script>
    <script src="./js/functions.js"></script>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=WDXL+Lubrifont+TC&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <!-- font-family: "WDXL Lubrifont TC", sans-serif; -->
  </head>

  <body id="body">
    <!-- Thanh chỉnh -->
    <div class="controls" id="controls" disabled style="display: none;">
      <label>Năm: <input type="number" id="yearInput" value="2026" /></label>
      <label
        >Font chữ:
        <select id="fontSelect">
          <option value="Arial">Arial</option>
          <option value="Times New Roman">Times New Roman</option>
          <option value="Courier New">Courier New</option>
          <option value="Verdana">Verdana</option>
          <option value="WDXL Lubrifont TC">WDXL Lubrifont TC</option>
        </select>
      </label>
      <label
        >Cỡ chữ cho nội dung:
        <input type="range" id="fontSizeInput" min="10" max="30" value="16" />
        <span id="fontSizeValue">16px</span>
      </label>
      <label
        >Cỡ chữ cho tiêu đề:
        <input
          type="range"
          id="titleFontSizeInput"
          min="10"
          max="30"
          value="20"
        />
        <span id="titleFontSizeValue">20px</span>
      </label>
      
      <button onclick="">Tạo lịch</button>
      <!-- <button onclick="downloadPDF()">Tải PDF</button> -->
      <!-- <button onclick="exportPDF()">Xuất PDF</button> -->
    </div>
    <!-- Modal thông báo -->
    <section class="modal hidden">
      <div>
        <h3>Thông Báo!</h3>
        <p>Đang trong quá trình xử lý dữ liệu, vui lòng đợi trong giây lát.</p>
      </div>

      <button class="btn">Submit</button>
    </section>
    <!-- Render lịch -->
    <div id="all-calendars"></div>

    <div class="overlay hidden"></div>
  </body>

  <script src="./js/modal.js"></script>
  <script src="./js/generateLiturgicalCalendar.js"></script>
  <script src="./js/generateCalendar.js"></script>


  <script src="./base64fonts/CrimsonText.js"></script>
  <script src="./base64fonts/CrimsonTextBold.js"></script>
  <script src="./js/exportCal.js"></script>
  <script>generateCalendars()</script>
  <script>
    // lắng nghe sự kiện nút control + p
    document.addEventListener("keydown", function (event) {
      if (event.ctrlKey && event.key === "p") {
        event.preventDefault();
        let controls = document.getElementById("controls");
        let body = document.getElementById("body");
        let allCalendars = document.getElementById("all-calendars");
        let cals = allCalendars.innerHTML;
        body.classList.add("printing");
        controls.classList.add("hidden");

        allCalendars.innerHTML = `<div class="fake-calendar"></div>` + cals;

        var innn = alert(
          "Muốn in không? /nĐang trong quá trình xử lý dữ liệu, vui lòng đợi trong giây lát."
        );
        if (innn) {
          controls.classList.remove("hidden");
          body.classList.remove("printing");
          allCalendars.innerHTML = cals;
          return;
        } else {
          window.print();
          controls.classList.remove("hidden");
          body.classList.remove("printing");
          allCalendars.innerHTML = cals;
        }
      }
    });
  </script>
</html>
